<!doctype html>
<html><head><meta charset="utf-8"></head>
<body>
<script>
(function () {
  function parse(q) {
    const m = {};
    (q || "").replace(/^\?/, "").split("&").forEach(s => {
      if (!s) return;
      const [k, v] = s.split("=");
      m[decodeURIComponent(k)] = decodeURIComponent(v || "");
    });
    return m;
  }

  const payload = { query: parse(location.search), hash: location.hash };

  try {
    // kirim balik hanya ke origin yang sama (localhost kamu)
    window.opener && window.opener.postMessage({ type: "civic:ok", payload }, location.origin);
  } catch (e) {}

  window.close();
})();
</script>
</body></html>

